<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRLogix</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #071d49;
            --secondary: #c4d600;
            --highlight: #115df5;
            --surface: #ffffff;
            --danger: #d93025;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: clamp(16px, 4vh, 32px);
            background-color: var(--secondary);
            color: var(--primary);
            font-family: 'Montserrat', sans-serif;
            text-align: center;
        }

        .cuerpo {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: clamp(12px, 4vh, 28px);
            width: min(100%, 420px);
        }

        .logo img {
            width: clamp(90px, 55vw, 110px);
            height: auto;
            display: block;
        }

        .info h1 {
            font-size: clamp(2rem, 7vw, 2.9rem);
            font-weight: 800;
            margin: 0;
        }

        .escan {
            display: flex;
            flex-direction: column;
        }

        .placa { 
            font-size: clamp(1rem, 4.6vw, 1.5rem);
            font-weight: 700; 
            color: var(--highlight); 
        }

        .timeline {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            gap: clamp(8px, 2vw, 18px);
        }

        .timeline .circle{
            flex: 0 0 auto;
            width: clamp(30px, 13vw, 50px);
            aspect-ratio: 1 / 1;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            position: relative;
            color: var(--primary);
            background-color: var(--surface);
            box-shadow: 0 0 6px rgba(7, 29, 73, 0.25);
        }

        .timeline .circle .label {
            position: absolute;
            top: 105%;
            font-size: clamp(1rem, 2.6vw, 1.2rem);
            white-space: nowrap;
            color: var(--primary);
        }

        .timeline .line {
            flex: 1 1 clamp(16px, 10vw, 48px);
            height: 2px;
            background-color: var(--primary);
            box-shadow: 0 0 4px rgba(7, 29, 73, 0.2);
        }

        .timeline .circle.completed {
            background-color: var(--primary);
            color: var(--secondary);
        }

        .timeline .circle.skipped {
            background-color: var(--danger);
            color: #ffffff;
            border: none;
        }

        .timeline .circle.pending {
            background-color: var(--surface);
            color: var(--primary); 
        }

        .mensaje-container {
            width: 100%;
            padding: clamp(14px, 4vh, 22px);
            border-radius: 16px;
            background-color: var(--surface);
            color: var(--primary);
            box-shadow: 18px 18px 12px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: clamp(8px, 2vh, 18px);
            animation: fadeBlink .3s ease-in-out 2;
        }

        @keyframes fadeBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        h2 {
            font-size: clamp(1rem, 5vw, 1.5rem);
            margin: 0;
        }

        p {
            font-size: clamp(0.5rem, 4vw, 1rem);
            margin: 0;
            font-weight: 600;
        }

        .mensaje-container img {
            width: clamp(60px, 45vw, 100px);
            height: auto;
        }

        @media (max-width: 360px) {
            .timeline {
                gap: clamp(6px, 3vw, 12px);
            }

            .timeline .circle {
                width: clamp(44px, 16vw, 60px);
            }
        }

        @media (max-height: 600px) {
            body {
                padding: clamp(12px, 3vh, 24px);
            }

            .cuerpo {
                gap: clamp(10px, 3vh, 20px);
            }

            .mensaje-container {
                box-shadow: 12px 12px 10px rgba(0, 0, 0, 0.18);
            }
        }


    </style>
    
</head>
<body>
    <div class="cuerpo">
        <div class="logo">
            <img src="/static/imagenes/ARG_logo_hor_color_no_background.png" alt="Logo Empresa">
        </div>

        <div class="info">
            <h1>Se ha escaneado correctamente</h1>
        </div>

        <div class="escan">
            <span class="placa">Placa: {{ placa }}</span>
            <span class="placa">Hora: {{ hora }}</span>
        </div>

        <div class="timeline">
            {% for punto in puntos %}
                <div class="circle {{ estados.get(punto, 'pending') }}">
                    {% if estados.get(punto) == 'completed' %}✓
                    {% elif estados.get(punto) == 'skipped' %}!
                    {% else %}{{ loop.index }}{% endif %}
                    <span class="label">{{ nombres.get(punto, 'Punto ' ~ loop.index) }}</span>
                </div>
                {% if not loop.last %}
                    <div class="line"></div>
                {% endif %}
            {% endfor %}
        </div>

        <div class="mensaje-container" id="mensajeContainer">
            <h2>{{ mensaje_titulo }}</h2>
            <p>{{ mensaje_texto }}</p>
              <img src="{{ ilustracion }}" alt="Ilustración">
        </div>

    </div>

    <script>
      const modo = "{{ modo }}";
      const mensajeContainer = document.getElementById("mensajeContainer");
      if (modo === "recordatorio") {
        mensajeContainer.style.backgroundColor = "#FFFFFF";
        mensajeContainer.style.color = "#071D49";
        mensajeContainer.style.boxShadow = "0 0 10px rgba(0, 0, 0, 0.3)";
        mensajeContainer.style.borderRadius = "20px";
        mensajeContainer.style.padding = "20px";
      } else {
        mensajeContainer.style.backgroundColor = "#071D49";
        mensajeContainer.style.color = "#C4D600";
        mensajeContainer.style.boxShadow = "0 0 10px rgba(0, 0, 0, 0.3)";
        mensajeContainer.style.borderRadius = "20px";
        mensajeContainer.style.padding = "20px";
      }
    </script>

</body>
</html>
